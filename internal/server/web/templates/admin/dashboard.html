{{ define "content" }}
<div class="dashboard">    
    <div class="stats-grid">
        <div class="stat-card">
            <h3>Active Feeds</h3>
            <p class="stat-number">{{ .Data.FeedCount }}</p>
        </div>
        <div class="stat-card">
            <h3>Total Entries</h3>
            <p class="stat-number">{{ .Data.EntryCount }}</p>
        </div>
        <div class="stat-card">
          <h3>Last Update</h3>
          <div class="stat-value">
            {{ if .Data.LastUpdate.IsZero }}
                Never
            {{ else }}
                {{ formatTimeInZone (index .Data.Settings "timezone") .Data.LastUpdate }}
            {{ end }}
          </div>
        </div>
        <div class="stat-card highlight">
            <h3>Total Clicks</h3>
            <p class="stat-number">{{ .Data.ClickStats.TotalClicks }}</p>
        </div>
    </div>
    <div class="stats-panels">
        <div class="panel">
            <h3>Top Links (All Time)</h3>
            <div class="table-wrapper">
                <table>
                    <caption class="sr-only">Top performing links of all time</caption>
                    <thead>
                        <tr>
                            <th scope="col">Title</th>
                            <th scope="col">Clicks</th>
                            <th scope="col">Last Clicked</th>
                        </tr>
                    </thead>
                    <tbody>
                        {{ range .Data.ClickStats.TopAllTime }}
                        <tr>
                            <td class="title-cell">
                                <a href="{{ .URL }}" target="_blank" class="feed-url">{{ .Title }}</a>
                            </td>
                            <td class="number-cell">{{ .ClickCount }}</td>
                            <td class="date-cell">
                              {{ formatTimeInZone (index $.Data.Settings "timezone") .LastClicked }}
                          </td>
                        </tr>
                        {{ end }}
                    </tbody>
                </table>
            </div>
        </div>

        <div class="panel">
            <h3>Top Links (Past Week)</h3>
            <div class="table-wrapper">
                <table>
                    <caption class="sr-only">Top performing links from the past week</caption>
                    <thead>
                        <tr>
                            <th scope="col">Title</th>
                            <th scope="col">Clicks</th>
                            <th scope="col">Last Clicked</th>
                        </tr>
                    </thead>
                    <tbody>
                        {{ range .Data.ClickStats.TopPastWeek }}
                        <tr>
                            <td class="title-cell">
                                <a href="{{ .URL }}" target="_blank" class="feed-url">{{ .Title }}</a>
                            </td>
                            <td class="number-cell">{{ .ClickCount }}</td>
                            <td class="date-cell">
                              {{ formatTimeInZone (index $.Data.Settings "timezone") .LastClicked }}
                          </td>
                        </tr>
                        {{ end }}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
{{ end }}
{{ define "styles" }}
<link rel="stylesheet" href="{{ themeCSSAdmin .Data.Settings "dashboard.css" }}">
{{ end }}